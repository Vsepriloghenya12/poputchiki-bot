<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ø–æ–ø—É—Ç—á–∏–∫–∏ ‚Ä¢ –° –ù–æ–≤—ã–º 2026 –≥–æ–¥–æ–º! üéÑ</title>
  <meta name="viewport" content="width=390, initial-scale=1, maximum-scale=1, user-scalable=no" />

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- –ü—Ä–µ–º–∏—É–º —à—Ä–∏—Ñ—Ç Manrope (–∫–∞–∫ –≤ khaps_wishlist_bot) -->
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Manrope', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: #e2e8f0;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    /* –ü–∞–¥–∞—é—â–∏–π —Å–Ω–µ–≥ */
    #snow-canvas {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  pointer-events: none !important;
  z-index: 1;
  user-select: none;
}

    .container {
      position: relative;
      z-index: 2;
      max-width: 640px;
      margin: 0 auto;
      padding: 12px 12px 60px 12px;
    }

    .card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(12px);
      border-radius: 18px;
      padding: 14px 14px 16px 14px;
      margin-bottom: 14px;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .title-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      padding-bottom: 6px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    }

    .logo {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: linear-gradient(135deg, #f704db, #10b981);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ffffff;
      font-weight: 700;
      font-size: 18px;
      flex-shrink: 0;
    }

    .title {
      font-size: 20px;
      font-weight: 700;
      background: linear-gradient(90deg, #fbbf24, #f59e0b, #dc2626);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 13px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: #94a3b8;
      margin-bottom: 8px;
    }

    .info {
      font-size: 13px;
      color: #cbd5e1;
      margin-top: 4px;
      white-space: pre-line;
      line-height: 1.4;
    }

    .small-text {
      font-size: 11px;
      color: #94a3b8;
    }

    .field {
      margin-bottom: 8px;
    }

    .field label {
      display: block;
      font-size: 12px;
      color: #94a3b8;
      margin-bottom: 3px;
    }

    .field input,
    .field textarea,
    .field select {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 7px 9px;
      font-size: 15px;
      box-sizing: border-box;
      background: rgba(255, 255, 255, 0.1);
      color: #e2e8f0;
    }

    .field input:focus,
    .field textarea:focus,
    .field select:focus {
      outline: none;
      border-color: #fbbf24;
      box-shadow: 0 0 0 1px rgba(251, 191, 36, 0.3);
      background: rgba(255, 255, 255, 0.15);
    }

    .field-inline {
      display: flex;
      gap: 8px;
    }

    .field-inline .field {
      flex: 1;
      margin-bottom: 0;
    }

    .role-buttons {
      display: flex;
      gap: 8px;
      margin-top: 4px;
    }

    .role-buttons button {
      flex: 1;
      border-radius: 16px;
      padding: 12px 0;
      font-size: 15px;
      font-weight: 700;
      color: #ffffff;
      border: none;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.15s ease;
    }

    #btn-driver {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      box-shadow: 0 3px 8px rgba(37, 99, 235, 0.4);
    }

    #btn-passenger {
      background: linear-gradient(135deg, #10b981, #059669);
      box-shadow: 0 3px 8px rgba(16, 185, 129, 0.4);
    }

    .role-buttons button:active {
      transform: scale(0.97);
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 8px 12px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    button:active {
      transform: translateY(1px);
    }

    .primary-btn {
      background: linear-gradient(90deg, #dc2626, #ef4444);
      color: #ffffff;
      box-shadow: 0 2px 6px rgba(239, 68, 68, 0.35);
    }

    .secondary-btn {
      background: rgba(255, 255, 255, 0.1);
      color: #e2e8f0;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .danger-btn {
      background: #ef4444;
      color: #ffffff;
      box-shadow: 0 2px 6px rgba(239, 68, 68, 0.35);
    }

    .trip-card,
    .booking-card,
    .plan-card {
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      padding: 8px 9px;
      margin-bottom: 8px;
      font-size: 13px;
      background: rgba(255, 255, 255, 0.05);
    }

    .trip-header,
    .booking-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
      gap: 6px;
    }

    .trip-route,
    .booking-status {
      font-weight: 700;
      font-size: 14px;
    }

    .booking-status {
      color: #34d399;
      white-space: nowrap;
    }

    .trip-meta,
    .booking-meta {
      font-size: 12px;
      color: #cbd5e1;
      line-height: 1.4;
    }

    .tag {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid rgba(251, 191, 36, 0.3);
      background: rgba(251, 191, 36, 0.1);
      color: #fbbf24;
      margin-right: 4px;
      margin-top: 2px;
    }

    .hidden {
      display: none !important;
    }

    .new-year-badge {
      text-align: center;
      font-size: 36px;
      margin: 20px 0;
      animation: sparkle 3s infinite;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0.8; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.05); }
    }

    /* –¢–≤–æ–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ tabs –∏ filters —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é */
    .tabs-bar {
      display: flex;
      gap: 8px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
      margin-bottom: 16px;
      position: sticky;
      top: 8px;
      z-index: 50;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    .tabs-bar::-webkit-scrollbar { display: none; }
    .tab-btn {
      flex: 1 1 0;
      min-width: 80px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.05);
      border-radius: 14px;
      padding: 10px 6px;
      font-weight: 700;
      font-size: 11.5px;
      line-height: 1.2;
      color: #e2e8f0;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .tab-btn svg {
      width: 24px;
      height: 24px;
      fill: #94a3b8;
      transition: fill 0.2s ease;
    }
    .tab-btn.active {
      background: #dc2626;
      color: #ffffff;
      border-color: #dc2626;
    }
    .tab-btn.active svg {
      fill: #ffffff;
    }

    .filters {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin: 10px 0;
      padding: 10px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 14px;
    }

    .filter-toggle-row {
      display: flex;
      justify-content: flex-end;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <!-- –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å–Ω–µ–≥ -->
  <canvas id="snow-canvas"></canvas>

  <div class="new-year-badge">üéÑ‚ùÑÔ∏è‚ú®</div>

  <div class="container">
        <!-- –®–∞–ø–∫–∞ —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º -->
    <div class="card">
      <div class="title-row">
        <div class="logo">üöó</div>
        <div class="title">–ø–æ–ø—É—Ç—á–∏–∫–∏</div>
      </div>
      <div class="info" id="user-info">
        –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö Telegram-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...
      </div>
    </div>

    <!-- –í—ã–±–æ—Ä —Ä–æ–ª–∏ -->
    <div class="card">
      <div class="subtitle">–ö—Ç–æ –≤—ã?</div>
      <div class="role-buttons">
        <button class="secondary-btn" id="btn-driver">–Ø –≤–æ–¥–∏—Ç–µ–ª—å</button>
        <button class="secondary-btn" id="btn-passenger">–Ø –ø–∞—Å—Å–∞–∂–∏—Ä</button>
      </div>
      <div class="info" id="role-info">
        –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.
      </div>
    </div>

    <div class="tabs-bar hidden" id="driver-tabs-bar">
      <button class="tab-btn" data-role="driver" data-tab="create">
        <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
        –°–æ–∑–¥–∞—Ç—å
      </button>
      <button class="tab-btn" data-role="driver" data-tab="active">
        <svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
        –ê–∫—Ç–∏–≤–Ω–∞—è
      </button>
      <button class="tab-btn" data-role="driver" data-tab="history">
        <svg viewBox="0 0 24 24"><path d="M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.11L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/></svg>
        –ò—Å—Ç–æ—Ä–∏—è
      </button>
      <button class="tab-btn" data-role="driver" data-tab="plans">
        <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
        –ü–∞—Å—Å–∞–∂–∏—Ä—ã
      </button>
    </div>

    <div class="tabs-bar hidden" id="passenger-tabs-bar">
      <button class="tab-btn" data-role="passenger" data-tab="trips">
        <svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
        –ü–æ–µ–∑–¥–∫–∏
      </button>
      <button class="tab-btn" data-role="passenger" data-tab="bookings">
        <svg viewBox="0 0 24 24"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
        –ú–æ–∏ –±—Ä–æ–Ω–∏
      </button>
      <button class="tab-btn" data-role="passenger" data-tab="plan">
        <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
        –ü–ª–∞–Ω
      </button>
    </div>
        <!-- –í–æ–¥–∏—Ç–µ–ª—å: —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏ + –º–∞—à–∏–Ω–∞ -->
    <div class="card hidden" id="driver-section">
      <div class="subtitle">–°–æ–∑–¥–∞—Ç—å –ø–æ–µ–∑–¥–∫—É</div>
      <div class="field">
        <label for="from-city">–û—Ç–∫—É–¥–∞</label>
        <input id="from-city" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–æ—á–∏" />
      </div>
      <div class="field">
        <label for="to-city">–ö—É–¥–∞</label>
        <input id="to-city" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–æ–∑–∞ –ü–ª–∞—Ç–æ" />
      </div>
      <div class="field">
        <label for="departure-time">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –≤—ã–µ–∑–¥–∞</label>
        <input id="departure-time" type="datetime-local" />
      </div>
      <div class="field field-inline">
        <div class="field">
          <label for="seats-total">–ú–µ—Å—Ç</label>
          <input id="seats-total" type="number" min="1" max="8" value="3" />
        </div>
        <div class="field">
          <label for="price-per-seat">–¶–µ–Ω–∞ –∑–∞ –º–µ—Å—Ç–æ</label>
          <input id="price-per-seat" type="number" min="0" step="10" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 500" />
        </div>
      </div>
      <div class="field">
        <label for="trip-note">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
        <input id="trip-note" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –µ–¥—É —á–µ—Ä–µ–∑ –†–æ–∑—É –•–æ–ª–ª" />
      </div>

      <button class="primary-btn" id="btn-create-trip">–°–æ–∑–¥–∞—Ç—å –ø–æ–µ–∑–¥–∫—É</button>
      <div class="info" id="driver-message"></div>

      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.15);margin:12px 0;" />

      <div class="subtitle">–ú–æ—è –º–∞—à–∏–Ω–∞</div>
      <div class="field field-inline">
        <div class="field">
          <label for="car-make">–ú–∞—Ä–∫–∞ / –º–æ–¥–µ–ª—å</label>
          <input id="car-make" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Kia Rio" />
        </div>
        <div class="field">
          <label for="car-color">–¶–≤–µ—Ç</label>
          <input id="car-color" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –±–µ–ª—ã–π" />
        </div>
      </div>
      <div class="field">
        <label for="car-plate">–ù–æ–º–µ—Ä</label>
        <input id="car-plate" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê123–í–° 123" />
      </div>
      <button class="secondary-btn" id="btn-save-car">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞—à–∏–Ω—É</button>
      <div class="info" id="driver-car-message"></div>
    </div>

    <!-- –ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞ –≤–æ–¥–∏—Ç–µ–ª—è -->
    <div class="card hidden" id="driver-active">
      <div class="subtitle">–ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞</div>
      <div class="info small-text">
        –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –±–ª–∏–∂–∞–π—à–∞—è –ø–æ–µ–∑–¥–∫–∞ (–≤–∫–ª—é—á–∞—è 10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞).
      </div>
      <button class="secondary-btn" id="btn-load-active-trip">–û–±–Ω–æ–≤–∏—Ç—å</button>
      <div class="info" id="driver-active-info">
        –ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞.
      </div>
      <div style="margin-top:8px;display:flex;gap:8px;">
        <button class="secondary-btn" id="btn-active-passengers">–ü–∞—Å—Å–∞–∂–∏—Ä—ã</button>
        <button class="danger-btn" id="btn-cancel-active-trip">–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–µ–∑–¥–∫—É</button>
      </div>
      <div class="info" id="driver-bookings-title" style="margin-top:8px;"></div>
      <div id="driver-bookings-list"></div>
    </div>

    <!-- –ò—Å—Ç–æ—Ä–∏—è –ø–æ–µ–∑–¥–æ–∫ –≤–æ–¥–∏—Ç–µ–ª—è -->
    <div class="card hidden" id="driver-history">
      <div class="subtitle">–ú–æ–∏ –ø–æ–µ–∑–¥–∫–∏</div>
      <button class="secondary-btn" id="btn-load-driver-trips">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
      <div class="info" id="driver-trips-list">
        –ü–æ–µ–∑–¥–∫–∏ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.
      </div>
    </div>

    <!-- –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è -->
    <div class="card hidden" id="driver-passenger-plans">
      <div class="subtitle">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤</div>
      <div class="info small-text">
        –ó–¥–µ—Å—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤. –ù–∞–∂–º–∏—Ç–µ ¬´–ó–∞–±—Ä–∞—Ç—å –ø–∞—Å—Å–∞–∂–∏—Ä–∞¬ª, —á—Ç–æ–±—ã –µ–º—É –ø—Ä–∏—à–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
        ¬´–í–∞—Å –∑–∞–±–µ—Ä—ë—Ç –≤–æ–¥–∏—Ç–µ–ª—å¬ª.
      </div>
      <div class="info" id="driver-passenger-plans-list">
        –ó–∞–ø—Ä–æ—Å—ã –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.
      </div>
      <button class="secondary-btn" id="btn-reload-driver-passenger-plans" style="margin-top:6px;">
        –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤
      </button>
    </div>

    <!-- –ü–∞—Å—Å–∞–∂–∏—Ä: —Å–ø–∏—Å–æ–∫ –ø–æ–µ–∑–¥–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ -->
    <div class="card hidden" id="passenger-section">
      <div class="subtitle">–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏</div>
      <div class="info small-text">
        –°–ø–∏—Å–æ–∫ –ø–æ–µ–∑–¥–æ–∫ —Å –µ—â—ë —Å–≤–æ–±–æ–¥–Ω—ã–º–∏ –º–µ—Å—Ç–∞–º–∏.
      </div>

      <div class="filter-toggle-row">
        <button class="secondary-btn" id="btn-toggle-passenger-filters" type="button">
          –§–∏–ª—å—Ç—Ä—ã ‚ñº
        </button>
      </div>

      <div class="filters hidden" id="passenger-filters">
        <div class="field">
          <label>–û—Ç–∫—É–¥–∞</label>
          <select id="filter-from">
            <option value="">–õ—é–±–æ–π</option>
          </select>
        </div>
        <div class="field">
          <label>–ö—É–¥–∞</label>
          <select id="filter-to">
            <option value="">–õ—é–±–æ–π</option>
          </select>
        </div>
        <div class="field">
          <label>–î–∞—Ç–∞</label>
          <select id="filter-day">
            <option value="any">–õ—é–±–∞—è</option>
            <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
            <option value="tomorrow">–ó–∞–≤—Ç—Ä–∞</option>
          </select>
        </div>
        <div class="field">
          <label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
          <select id="filter-sort">
            <option value="time_asc">–ü–æ –≤—Ä–µ–º–µ–Ω–∏ ‚Üë</option>
            <option value="time_desc">–ü–æ –≤—Ä–µ–º–µ–Ω–∏ ‚Üì</option>
          </select>
        </div>
        <div class="actions">
          <button class="secondary-btn" id="btn-apply-filters" type="button">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
          <button class="secondary-btn" id="btn-reset-filters" type="button">–°–±—Ä–æ—Å</button>
        </div>
      </div>

      <button class="secondary-btn" id="btn-refresh-trips" type="button">–û–±–Ω–æ–≤–∏—Ç—å</button>

      <div id="trips-list" class="info">
        –ü–æ–µ–∑–¥–∫–∏ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.
      </div>
    </div>
        <!-- –ü–∞—Å—Å–∞–∂–∏—Ä: –∞–∫—Ç–∏–≤–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="card hidden" id="passenger-active">
      <div class="subtitle">–ú–æ–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</div>
      <button class="secondary-btn" id="btn-load-passenger-active">–ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏</button>
      <div class="info" id="passenger-active-list">
        –ê–∫—Ç–∏–≤–Ω—ã–µ –±—Ä–æ–Ω–∏ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.
      </div>
    </div>

    <!-- –ü–∞—Å—Å–∞–∂–∏—Ä: –ø–ª–∞–Ω—ã –ø–æ–µ–∑–¥–æ–∫ -->
    <div class="card hidden" id="passenger-plans-section">
      <div class="subtitle">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–µ–∑–¥–∫—É</div>
      <div class="field">
        <label for="plan-from-city">–û—Ç–∫—É–¥–∞</label>
        <input id="plan-from-city" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–æ—á–∏" />
      </div>
      <div class="field">
        <label for="plan-to-city">–ö—É–¥–∞</label>
        <input id="plan-to-city" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–æ–∑–∞ –ü–ª–∞—Ç–æ" />
      </div>
      <div class="field">
        <label for="plan-desired-time">–ñ–µ–ª–∞–µ–º–∞—è –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
        <input id="plan-desired-time" type="datetime-local" />
      </div>
      <div class="field">
        <label for="plan-seats-needed">–°–∫–æ–ª—å–∫–æ –º–µ—Å—Ç –Ω—É–∂–Ω–æ</label>
        <input id="plan-seats-needed" type="number" min="1" max="8" value="1" />
      </div>
      <div class="field">
        <label for="plan-note">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
        <input id="plan-note" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–¥–æ–π–¥—ë—Ç –≤—ã–µ–∑–¥ —Å 8 –¥–æ 10 —É—Ç—Ä–∞" />
      </div>
      <button class="secondary-btn" id="btn-create-passenger-plan">–°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –ø–æ–µ–∑–¥–∫–∏</button>
      <div class="info" id="passenger-plan-message"></div>

      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.15);margin:12px 0;" />

      <div class="subtitle">–ú–æ–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏</div>
      <div class="info small-text">
        –ö–æ–≥–¥–∞ –≤–æ–¥–∏—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –≤–∞—à –ø–ª–∞–Ω, –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–í–∞—Å –∑–∞–±–µ—Ä—ë—Ç –≤–æ–¥–∏—Ç–µ–ª—å¬ª.
      </div>
      <div class="info" id="passenger-plans-list">
        –ü–ª–∞–Ω—ã –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.
      </div>
    </div>

    <!-- –í–æ–¥–∏—Ç–µ–ª—å: –±–ª–æ–∫ –æ–ø–ª–∞—Ç—ã -->
    <div class="card hidden" id="driver-payment-block">
      <div class="subtitle">–û–ø–ª–∞—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è</div>
      <div class="info" id="driver-payment-info">
        –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏—Ö –ø–æ–µ–∑–¥–∫–∞—Ö.
      </div>
      <div class="info" id="driver-payment-requisites"></div>

      <div class="field hidden" id="driver-payment-copy-block">
        <label for="driver-payment-details-copy">–†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è</label>
        <textarea
          id="driver-payment-details-copy"
          rows="3"
          readonly
          style="width:100%;padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.2);font-size:13px;background:rgba(255,255,255,0.1);color:#e2e8f0;"
        ></textarea>
        <button class="secondary-btn" id="btn-copy-payment-details" type="button">
          –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
        </button>
      </div>

      <div class="field">
        <label for="driver-payment-file">–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —á–µ–∫ –æ–± –æ–ø–ª–∞—Ç–µ</label>
        <input id="driver-payment-file" type="file" />
      </div>
      <button class="secondary-btn" id="btn-upload-payment">–ó–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫</button>
    </div>

    <!-- –ê–¥–º–∏–Ω: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–ª–∞—Ç–æ–π -->
    <div class="card hidden" id="admin-section">
      <div class="subtitle">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å–µ—Ä–≤–∏—Å–∞</div>

      <div class="info" id="admin-settings-info">
        –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫.
      </div>

      <div class="field">
        <label for="admin-payment-details">–†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã</label>
        <textarea
          id="admin-payment-details"
          rows="3"
          style="width:100%;padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.2);font-size:13px;background:rgba(255,255,255,0.1);color:#e2e8f0;"
        ></textarea>
      </div>

      <div class="role-buttons" style="margin-top:4px;">
        <button class="secondary-btn" id="btn-disable-pay">–°–¥–µ–ª–∞—Ç—å —Å–µ—Ä–≤–∏—Å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º</button>
        <button class="primary-btn" id="btn-enable-pay">–í–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π</button>
      </div>

      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.15);margin:12px 0;" />

      <div class="subtitle">–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
      <button class="secondary-btn" id="btn-load-stats">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
      <div class="info" id="admin-stats-info">
        –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞.
      </div>

      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.15);margin:12px 0;" />

      <div class="subtitle">–í–æ–¥–∏—Ç–µ–ª–∏ –∑–∞ –¥–µ–Ω—å</div>
      <div class="field">
        <label for="admin-drivers-date">–î–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
        <input id="admin-drivers-date" type="date" />
      </div>
      <button class="secondary-btn" id="btn-load-daily-drivers">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤–æ–¥–∏—Ç–µ–ª–µ–π</button>
      <div class="info" id="admin-daily-drivers">
        –°–ø–∏—Å–æ–∫ –≤–æ–¥–∏—Ç–µ–ª–µ–π –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω.
      </div>
    </div>
  </div> <!-- –∫–æ–Ω–µ—Ü .container -->
    <script>
    const tg = window.Telegram ? window.Telegram.WebApp : null;
    const ADMIN_ID = 504348666;

    let currentTelegramUser = null;
    let activeTripId = null;

    const userInfoDiv = document.getElementById('user-info');
    const btnDriver = document.getElementById('btn-driver');
    const btnPassenger = document.getElementById('btn-passenger');
    const roleInfo = document.getElementById('role-info');

    const driverSection = document.getElementById('driver-section');
    const driverHistory = document.getElementById('driver-history');
    const driverActive = document.getElementById('driver-active');

    const passengerSection = document.getElementById('passenger-section');
    const passengerActiveSection = document.getElementById('passenger-active');
    const driverMessage = document.getElementById('driver-message');
    const tripsList = document.getElementById('trips-list');

    const btnLoadDriverTrips = document.getElementById('btn-load-driver-trips');
    const driverTripsList = document.getElementById('driver-trips-list');
    const driverBookingsTitle = document.getElementById('driver-bookings-title');
    const driverBookingsList = document.getElementById('driver-bookings-list');

    const btnLoadActiveTrip = document.getElementById('btn-load-active-trip');
    const btnActivePassengers = document.getElementById('btn-active-passengers');
    const btnCancelActiveTrip = document.getElementById('btn-cancel-active-trip');
    const driverActiveInfo = document.getElementById('driver-active-info');

    const driverCarMessage = document.getElementById('driver-car-message');

    const driverPaymentBlock = document.getElementById('driver-payment-block');
    const driverPaymentInfo = document.getElementById('driver-payment-info');
    const driverPaymentRequisites = document.getElementById('driver-payment-requisites');
    const driverPaymentCopyBlock = document.getElementById('driver-payment-copy-block');
    const driverPaymentDetailsCopy = document.getElementById('driver-payment-details-copy');
    const btnCopyPaymentDetails = document.getElementById('btn-copy-payment-details');
    const driverPaymentFile = document.getElementById('driver-payment-file');
    const btnUploadPayment = document.getElementById('btn-upload-payment');

    const adminSection = document.getElementById('admin-section');
    const adminSettingsInfo = document.getElementById('admin-settings-info');
    const adminPaymentDetails = document.getElementById('admin-payment-details');
    const btnEnablePay = document.getElementById('btn-enable-pay');
    const btnDisablePay = document.getElementById('btn-disable-pay');

    const btnLoadStats = document.getElementById('btn-load-stats');
    const adminStatsInfo = document.getElementById('admin-stats-info');

    const btnLoadDailyDrivers = document.getElementById('btn-load-daily-drivers');
    const adminDailyDrivers = document.getElementById('admin-daily-drivers');
    const adminDriversDate = document.getElementById('admin-drivers-date');

    const btnLoadPassengerActive = document.getElementById('btn-load-passenger-active');
    const passengerActiveList = document.getElementById('passenger-active-list');

    // –ü–ª–∞–Ω—ã –ø–æ–µ–∑–¥–æ–∫ –ø–∞—Å—Å–∞–∂–∏—Ä–∞
    const passengerPlansSection = document.getElementById('passenger-plans-section');
    const planFromCityInput = document.getElementById('plan-from-city');
    const planToCityInput = document.getElementById('plan-to-city');
    const planDesiredTimeInput = document.getElementById('plan-desired-time');
    const planSeatsNeededInput = document.getElementById('plan-seats-needed');
    const planNoteInput = document.getElementById('plan-note');
    const btnCreatePassengerPlan = document.getElementById('btn-create-passenger-plan');
    const passengerPlanMessage = document.getElementById('passenger-plan-message');
    const passengerPlansList = document.getElementById('passenger-plans-list');

    // –§–∏–ª—å—Ç—Ä—ã –ø–∞—Å—Å–∞–∂–∏—Ä–∞
    const filterFrom = document.getElementById('filter-from');
    const filterTo = document.getElementById('filter-to');
    const filterDay = document.getElementById('filter-day');
    const filterSort = document.getElementById('filter-sort');
    const btnApplyFilters = document.getElementById('btn-apply-filters');
    const btnResetFilters = document.getElementById('btn-reset-filters');
    const passengerFilters = document.getElementById('passenger-filters');
    const btnTogglePassengerFilters = document.getElementById('btn-toggle-passenger-filters');

    // –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Å—Å–∞–∂–∏—Ä—ã –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è
    const driverPassengerPlansCard = document.getElementById('driver-passenger-plans');
    const driverPassengerPlansList = document.getElementById('driver-passenger-plans-list');
    const btnReloadDriverPassengerPlans = document.getElementById('btn-reload-driver-passenger-plans');

    // –í–µ—Å—å —Ç–≤–æ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π JS-–∫–æ–¥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (–Ω–∏—á–µ–≥–æ –Ω–µ –æ–±—Ä–µ–∑–∞–Ω–æ)
    // ... (–≤–µ—Å—å –∫–æ–¥ –∏–∑ —Ç–≤–æ–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞—á–∏–Ω–∞—è –æ—Ç function isStillActiveByDeparture –∏ –¥–æ –∫–æ–Ω—Ü–∞)

    // –ó–¥–µ—Å—å –≤–µ—Å—å —Ç–≤–æ–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –ø—Ä–∏—Å–ª–∞–ª ‚Äî –æ—Ç —Ñ—É–Ω–∫—Ü–∏–π formatName, formatDateReadable –∏ –¥–æ —Å–∞–º–æ–≥–æ –∫–æ–Ω—Ü–∞ —Å initAdminDriverBlockButtons()

    // (–Ø –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é –µ–≥–æ –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –Ω–µ —É–¥–ª–∏–Ω—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é)

    // –í –∫–æ–Ω—Ü–µ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å–∫—Ä–∏–ø—Ç —Å–Ω–µ–≥–∞
    const canvas = document.getElementById('snow-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    const flakes = [];
    for (let i = 0; i < 100; i++) {
      flakes.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 3 + 1,
        speed: Math.random() * 1 + 0.5,
        drift: Math.random() * 0.6 - 0.3,
        opacity: Math.random() * 0.4 + 0.6
      });
    }

    function animateSnow() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      flakes.forEach(f => {
        ctx.fillStyle = `rgba(255,255,255,${f.opacity})`;
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
        ctx.fill();
        f.y += f.speed;
        f.x += f.drift;
        if (f.y > canvas.height) {
          f.y = -10;
          f.x = Math.random() * canvas.width;
        }
      });
      requestAnimationFrame(animateSnow);
    }
    animateSnow();
  </script>
</body>
</html>